function loadSong(index, direction = '') {
      const song = songs[index];
      coverArt.classList.remove('slideLeft', 'slideRight');
      void coverArt.offsetWidth;
      if (direction) coverArt.classList.add(direction === 'left' ? 'slideLeft' : 'slideRight');

      setTimeout(() => {
        audio.src = song.file;
        songTitle.textContent = song.title;
        artistName.textContent = song.artist;
        coverArt.style.backgroundImage = `url('${song.cover}')`;
        backgroundBlur.style.backgroundImage = `url('${song.cover}')`;
        document.title = `${song.title} - ${song.artist}`;
        highlightCurrentSong();

        // Media Session API
        if ('mediaSession' in navigator) {
          navigator.mediaSession.metadata = new MediaMetadata({
            title: song.title,
            artist: song.artist,
            artwork: [
              { src: song.cover, sizes: '512x512', type: 'image/jpeg' }
            ]
          });

          navigator.mediaSession.setActionHandler('play', playSong);
          navigator.mediaSession.setActionHandler('pause', pauseSong);
          navigator.mediaSession.setActionHandler('previoustrack', prevSong);
          navigator.mediaSession.setActionHandler('nexttrack', nextSong);
        }

        playSong();  // langsung autoplay

      }, direction ? 400 : 0);
    }
