<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Streaming dengan Shaka Player dan Remote TV (Netflix-like)</title>
    <!-- Menambahkan Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Menambahkan Shaka Player -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.0.0/shaka-player.compiled.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
        }

        .video-container {
            position: relative;
            width: 100vw;
            height: 60vh;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10vh;
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .control-btn {
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.7);
            border: none;
            font-size: 18px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        .control-btn:hover {
            background-color: rgba(255, 255, 255, 1);
        }

        /* Tombol kontrol pilihan video */
        .video-selection-container {
            margin-top: 20px;
            padding: 20px;
            display: flex;
            overflow-x: scroll;
            -webkit-overflow-scrolling: touch;
            gap: 15px;
        }

        .video-thumbnail {
            width: 180px;
            height: 100px;
            background-color: #333;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .video-thumbnail:hover {
            transform: scale(1.1);
        }

        /* Responsif untuk ukuran layar yang lebih kecil */
        @media (max-width: 768px) {
            .video-container {
                height: auto;
                padding-top: 56.25%;
            }

            .video-thumbnail {
                width: 140px;
                height: 80px;
            }
        }
    </style>
</head>
<body>

    <div class="video-container">
        <!-- Video player Shaka -->
        <div id="shaka-player-container"></div>
        <div class="controls">
            <button class="control-btn btn btn-light" id="playPauseBtn">Play</button>
            <button class="control-btn btn btn-light" id="muteBtn">Mute</button>
        </div>
    </div>

    <!-- Pilihan video yang dapat digulirkan -->
    <div class="video-selection-container">
        <!-- Video Thumbnail 1 -->
        <div class="video-thumbnail" id="video1" onclick="changeVideo('https://path_to_video/video1.mpd')"></div>
        <!-- Video Thumbnail 2 -->
        <div class="video-thumbnail" id="video2" onclick="changeVideo('https://path_to_video/video2.mpd')"></div>
        <!-- Video Thumbnail 3 -->
        <div class="video-thumbnail" id="video3" onclick="changeVideo('https://path_to_video/video3.mpd')"></div>
        <!-- Video Thumbnail 4 -->
        <div class="video-thumbnail" id="video4" onclick="changeVideo('https://path_to_video/video4.mpd')"></div>
        <!-- Video Thumbnail 5 -->
        <div class="video-thumbnail" id="video5" onclick="changeVideo('https://path_to_video/video5.mpd')"></div>
        <!-- Tambahkan lebih banyak thumbnail video jika diperlukan -->
    </div>

    <!-- Menambahkan Bootstrap JS dan Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        let player;
        const playPauseBtn = document.getElementById('playPauseBtn');
        const muteBtn = document.getElementById('muteBtn');

        // Fungsi untuk menginisialisasi Shaka Player
        function initPlayer() {
            const videoContainer = document.getElementById('shaka-player-container');
            player = new shaka.Player(videoContainer);

            // Tangani error player
            player.addEventListener('error', onError);

            // Memuat video default saat pertama kali dimuat
            changeVideo('http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4');
        }

        // Fungsi untuk menangani error
        function onError(event) {
            console.error('Error saat memuat video:', event.detail);
        }

        // Fungsi untuk memutar dan menjeda video
        function togglePlayPause() {
            if (player.isPaused()) {
                player.play();
                playPauseBtn.textContent = 'Pause';
            } else {
                player.pause();
                playPauseBtn.textContent = 'Play';
            }
        }

        // Fungsi untuk mute/unmute video
        function toggleMute() {
            const isMuted = player.isMuted();
            player.setMuted(!isMuted);
            muteBtn.textContent = isMuted ? 'Mute' : 'Unmute';
        }

        // Fungsi untuk mengganti video berdasarkan thumbnail yang dipilih
        function changeVideo(videoSource) {
            player.load(videoSource).then(() => {
                console.log('Video berhasil dimuat');
                playPauseBtn.textContent = 'Pause';
            }).catch((error) => {
                console.error('Error saat memuat video', error);
            });
        }

        // Event listener untuk tombol play/pause
        playPauseBtn.addEventListener('click', togglePlayPause);

        // Event listener untuk tombol mute/unmute
        muteBtn.addEventListener('click', toggleMute);

        // Menangani input dari remote TV
        document.addEventListener('keydown', function(event) {
            switch (event.key) {
                case 'ArrowUp':
                    // Meningkatkan volume
                    if (player.getVolume() < 1) player.setVolume(player.getVolume() + 0.1);
                    break;
                case 'ArrowDown':
                    // Menurunkan volume
                    if (player.getVolume() > 0) player.setVolume(player.getVolume() - 0.1);
                    break;
                case 'ArrowLeft':
                    // Mundur 10 detik
                    player.seek(player.getCurrentTime() - 10);
                    break;
                case 'ArrowRight':
                    // Maju 10 detik
                    player.seek(player.getCurrentTime() + 10);
                    break;
                case 'Enter':
                    // Toggle Play/Pause
                    togglePlayPause();
                    break;
                case 'Backspace':
                    // Toggle Mute/Unmute
                    toggleMute();
                    break;
                default:
                    break;
            }
        });

        // Inisialisasi player setelah halaman dimuat
        window.onload = initPlayer;
    </script>

</body>
</html>
