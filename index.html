<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Streaming dengan DRM</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Shaka Player untuk video streaming -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/3.0.0/shaka-player.compiled.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Video Streaming dengan DRM</h1>

        <div class="row justify-content-center">
            <div class="col-md-8">
                <div id="video-container" class="video-container">
                    <video id="video" class="w-100" controls></video>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Menjalankan Shaka Player
        function initPlayer() {
            // Membuat objek player Shaka
            const player = new shaka.Player(document.getElementById('video'));

            // Menambahkan listener untuk menangani error
            player.addEventListener('error', onErrorEvent);

            // Mengonfigurasi URL .mpd untuk streaming
            const videoUrl = 'URL_VIDEO_MPD_ANDA.mpd';

            // Mengonfigurasi DRM (misalnya, menggunakan Widevine)
            const drmConfig = {
                servers: {
                    'com.widevine.alpha': 'URL_LICENSI_WIDEVINE_ANDA' // Ganti dengan URL server lisensi Widevine Anda
                }
            };

            player.configure({
                drm: drmConfig
            });

            // Memulai pemutaran video
            player.load(videoUrl).then(function() {
                console.log('Video berhasil dimuat');
            }).catch(onError);
        }

        // Fungsi untuk menangani error
        function onError(error) {
            console.error('Error saat pemutaran video: ', error);
            alert('Terjadi kesalahan dalam memuat video.');
        }

        // Menangani event error dari Shaka Player
        function onErrorEvent(event) {
            onError(event.detail);
        }

        // Menunggu hingga halaman siap dan memulai player
        document.addEventListener('DOMContentLoaded', function() {
            initPlayer();
        });
    </script>

    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
